import{a as P,u as I,r as a,g as k,j as e,T as n,L as B,B as V}from"./index-BnfdKZVy.js";import{P as A,C as L}from"./PageTitle-Dkg9so6R.js";import{E as q}from"./ErrorBanner-94absO_y.js";import{P as O}from"./PasswordStrength-MeHRcjj9.js";const F=e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5","aria-hidden":"true",children:[e.jsx("path",{d:"M22 6l-10 7L2 6",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"})]});function Y(){const{data:C}=P(),d=I();if(C)return d({to:"/app",replace:!0}),null;const[t,w]=a.useState(""),[m,E]=a.useState(""),[x,T]=a.useState(""),[g,b]=a.useState("VENDOR"),[r,y]=a.useState(""),[l,S]=a.useState(""),[p,h]=a.useState(!1),[v,f]=a.useState(!1),[j,N]=a.useState(!1),o=a.useMemo(()=>p?t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?"":"Formato inválido":"El email es obligatorio":"",[t,p]),i=a.useMemo(()=>v?r.length>=6?"":"Mínimo 6 caracteres":"",[r,v]),u=a.useMemo(()=>j?l===r?"":"Las contraseñas no coinciden":"",[l,r,j]),{mutateAsync:R,isPending:D,error:c}=k(),M=async s=>{s.preventDefault(),h(!0),f(!0),N(!0),!(o||i||u)&&(await R({email:t,password:r,role:g,name:m||void 0,vendorId:x||void 0}),d({to:"/app",replace:!0}))};return e.jsxs("div",{className:"mx-auto grid w-full max-w-md grid-cols-1 gap-6 px-2 sm:max-w-2xl",children:[e.jsx(A,{subtitle:"Completa tus datos para crear una cuenta.",children:"Crear cuenta"}),e.jsx(L,{padding:"lg",children:e.jsxs("form",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",onSubmit:M,noValidate:!0,children:[e.jsx("div",{className:"sm:col-span-2",children:e.jsx(n,{label:"Email",type:"email",required:!0,value:t,onBlur:()=>h(!0),onChange:s=>w(s.currentTarget.value),leftIcon:F,error:o})}),e.jsx(n,{label:"Nombre (opcional)",value:m,onChange:s=>E(s.currentTarget.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-200",children:"Rol"}),e.jsxs("select",{className:"mt-1 field w-full rounded-xl",value:g,onChange:s=>b(s.currentTarget.value),children:[e.jsx("option",{value:"ADMIN",children:"ADMIN"}),e.jsx("option",{value:"VENDOR",children:"VENDOR"}),e.jsx("option",{value:"GUARD",children:"GUARD"})]})]}),e.jsx(n,{label:"Vendor ID (opcional)",value:x,onChange:s=>T(s.currentTarget.value),placeholder:"uuid-…"}),e.jsxs("div",{className:"sm:col-span-2 space-y-2",children:[e.jsx(n,{label:"Contraseña",type:"password",required:!0,value:r,onBlur:()=>f(!0),onChange:s=>y(s.currentTarget.value),revealToggle:!0,error:i}),e.jsx(O,{value:r}),e.jsx("p",{className:"text-xs text-neutral-500",children:"Mínimo 6 caracteres. Recomendado 12+ con mayúsculas, números y símbolos."})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsx(n,{label:"Confirmar contraseña",type:"password",required:!0,value:l,onBlur:()=>N(!0),onChange:s=>S(s.currentTarget.value),revealToggle:!0,error:u})}),e.jsxs("div",{className:"sm:col-span-2 space-y-3",children:[e.jsx(q,{msg:c==null?void 0:c.message}),e.jsxs("div",{className:"flex flex-col-reveal gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(B,{to:"/login",className:"link text-sm",children:"Ya tengo cuenta"}),e.jsx(V,{type:"submit",loading:D,loadingText:"Creando…",disabled:!!o||!!i||!!u,children:"Crear cuenta"})]})]})]})})]})}export{Y as default};
