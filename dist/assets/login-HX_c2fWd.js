import{a as C,u as k,e as E,r as s,f as T,j as e,T as f,L as c,B}from"./index-BnfdKZVy.js";import{P as I,C as u}from"./PageTitle-Dkg9so6R.js";import{E as L}from"./ErrorBanner-94absO_y.js";const P=e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5","aria-hidden":"true",children:[e.jsx("path",{d:"M22 6l-10 7L2 6",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"})]}),S=e.jsxs("svg",{viewBox:"0 0 24 24",className:"h-5 w-5","aria-hidden":"true",children:[e.jsx("rect",{x:"4",y:"10",width:"16",height:"10",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),e.jsx("path",{d:"M8 10V7a4 4 0 118 0v3",stroke:"currentColor",strokeWidth:"2",fill:"none"})]});function A(){const{data:j}=C(),d=k(),r=E({from:"/login"}),m=typeof(r==null?void 0:r.next)=="string"?r.next:"/app";if(j)return d({to:m||"/app",replace:!0}),null;const[t,v]=s.useState(""),[x,g]=s.useState(!1),[n,w]=s.useState(""),[p,h]=s.useState(!1),o=s.useMemo(()=>x?t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?"":"Formato inválido":"El email es obligatorio":"",[t,x]),l=s.useMemo(()=>p?n?"":"La contraseña es obligatoria":"",[n,p]),{mutateAsync:N,isPending:b,error:i}=T(),y=async a=>{a.preventDefault(),g(!0),h(!0),!(o||l)&&(await N({email:t,password:n}),d({to:m||"/app",replace:!0}))};return e.jsxs("div",{className:"mx-auto grid w-full max-w-md grid-cols-1 gap-6 px-2 sm:max-w-lg",children:[e.jsx(I,{subtitle:"Accedé a tu cuenta con email y contraseña.",children:"Ingresar"}),e.jsx(u,{padding:"lg",className:"space-y-4",children:e.jsxs("form",{className:"space-y-5",onSubmit:y,noValidate:!0,children:[e.jsx(f,{label:"Email",type:"email",autoComplete:"email",required:!0,value:t,onBlur:()=>g(!0),onChange:a=>v(a.currentTarget.value),leftIcon:P,placeholder:"tu@email.com",error:o}),e.jsx(f,{label:"Contraseña",type:"password",autoComplete:"current-password",required:!0,value:n,onBlur:()=>h(!0),onChange:a=>w(a.currentTarget.value),placeholder:"••••••••",leftIcon:S,revealToggle:!0,error:l}),e.jsx(L,{msg:i==null?void 0:i.message}),e.jsxs("div",{className:"flex flex-col-reverse gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(c,{to:"/forgot-password",className:"link text-sm",children:"¿Olvidaste tu contraseña?"}),e.jsx(B,{type:"submit",loading:b,loadingText:"Ingresando…",disabled:!!o||!!l,children:"Ingresar"})]})]})}),e.jsxs(u,{padding:"md",className:"flex items-center justify-between gap-4",children:[e.jsx("p",{className:"text-sm",children:"¿No tenés cuenta?"}),e.jsx(c,{to:"/register",className:"btn btn-ghost",children:"Crear cuenta"})]}),e.jsxs(u,{padding:"md",className:"flex items-center justify-between gap-4",children:[e.jsx("p",{className:"text-sm",children:"¿No te llegó el email?"}),e.jsx(c,{to:"/resend-verification",className:"btn btn-ghost",children:"Reenviar verificación"})]})]})}export{A as default};
